Ciao, vorrei un aiuto per creare uno storico dei movimenti dei pneumatici con Km a cui le vedo la prima volta e quando le smonto per i cambi stagionali e le rimonto e così via in modo da poter tracciare la loror vita e i Km che hanno percorso.

Per strarre alla fine dei dati da esportare in un nuovo sistema in cui gestirò tutto.

Allora partiamo dalle TBL conivolte che sono:

1.  SchedaLavoro
    . Campi Più importanti IdSchedaLavoro che come vedi anche nel PDF Schema DbLavoro collega a molte delle altre TBL, poi all'interno trovi S_IdVeicolo che la collega alla TBL Veicolo, poi che usiamo i campi Km .

2.  ArtSchedaLavoro
    . Campi più importanti Art_IdSchedaLavoro che la collega alla scheda lavoro visto che questa TBL contiene le righe dei prodotti in SchedaLavoro, Art_Codice che la collega alla View dei Prodotti che qui trovi come Ant_Descrittori_WebSmall che è una chiave univoca, Art_Qta che sono le quantità dei prodotti, e un campo che useremo sicuramente e Art_Fascia che se troviamo i valori (A,B,C,U,R) campiamo che si tratta di un Pneumatico di Fascia A,B,B oppure un Usato Fascia U oppure ricoperto Fascia R. Questo campo Fascia lo trovi anche nella View dei Prodotti Ant_Descrittori_WebSmall.
    Come vedrai in alcune query che ti mostrerò in cui cerco di tirar fuori i dati per fare quello che ti sto chiedendo, uso questa tabella, ovviamente per cercare di capire quando molto smonto i pneumatici in modo da capire a quanti chilometri li tolgo e li metto in deposito piuttosto che li butto via piuttosto che li porta via il cliente, perché per smontare le gomme al cambio stagionale che altro non è che quando un cliente viene a montare le gomme invernali a smontare le estive o viceversa usiamo sempre dei codici articoli specifici che sono contenenti questa parte di codice articolo "@MS_STAG"

3.  Ant_Descrittori_WebSmall
    . View dei Prodotti dove troviamo tutti i campi che ci possono servire per filtarli e aggiungere informazioni che possono servire a noi, si collega agli articoli di qualunque TBL tramite 2 campi chiave "Art_Id" che è ID degli Articoli che nelle altre TBL spesso e chiamato Art_Id oppure IdArtico e tramite Art_Codice che è sempre univoco e nelle atre TBL spesso è chiamato Art_Codice anche se in molte TBL ha davanti una desinenza della TBL esempio in Deposito abbiamo D_ArtCodice che aggangia il Codice dell'articolo Anteriore e D_ArtCodicePost che aggangia il Codice dell'articolo Posteriore ma poi ti spiego meglio in deposito,

4.  Deposito
    . Il deposito è una delle più importanti in questo momento, perché dovremmo capire come interpretare i montaggi e smontaggi dei pneumatici, perché noi, quando un cliente viene col veicolo A fare un cambio stagionale, quindi smontare le gomme estive e montare le gomme invernali o viceversa segniamo cosa lascia in deposito e La sua destinazione, se così vogliamo dire che può essere deposito, smaltimento, porta via nei casi in cui le gomme siano da tenere e quindi le mettiamo in deposito oppure da buttare e le mettiamo a smaltimento oppure il cliente le tiene portandoseli a casa. Nella maggior parte dei casi, segniamo il codice articolo e quindi possiamo ottenere traccia di quel prodotto e se le abbiamo montate nuove, ne troverai traccia all'interno della tabella ArtSchedaLavoro dove segniamo i prodotti che montiamo, quindi anche le gomme nuove, come ti ho già detto e quindi lo stesso codice poi lo ritroveremo qui nei vari Stati che abbiamo detto prima il deposito smaltimento o porta via.
    I campi più importanti direi che sono:
        . Art_Codice che è il Codice Prodotto del Deposito dell'asse anteriore Che può diventare, però l'unico che segniamo se la macchina lasci in deposito quattro gomme della stessa misura.
        . D_ArtCodicePost C'è il codice prodotto del deposito dell'asse posteriore che di solito usiamo sia la macchina magari due tipi di pneumatici diversi come misura sull'asse anteriore da quello posteriore oppure se ha stessa misura, ma nell'asse anteriore due Dollop nell'asse posteriore due Pirelli e quindi le differenziamo
        . DOT Campo molto importante che dice la fabbricazione del prodotto è composto da quattro cifre le prime due sono la settimana dell'anno le ultime due l'anno e quando non c'è poi vedrai nello script una formula con cui Lo creo in automatico in base alla data che dobbiamo stabilire, ma è sempre uguale della scheda lavoro o del deposito.
        . Km in cui segnamo come in Scheda Lavoro i KM che dovrebbero sempre essere gli stessi della Scheda Lavoro con cui sono collegati
        . Data che altro non è che la Data in cui creiamo il Deposito come Data_Lavori della SchedaLavoro che pero e DATETIME come vedi dalle strutture dell TBL nei CSV con il nome di ogni TBL mentre quello del Deposito e DATE quinid come vedrai dagli script cerco di fare sempre quello come chiave per ovviamente ottenere un sicuro univoco.
        . D_TipoDepositoR1 Quello che ti ho specificato prima in cui scrivo il tipo di deposito dell'asse anteriore che normalmente agli Stati che comprendono la parola deposito smaltite o porta via
        . D_TipoDepositoR2 Quello che ti ho specificato prima in cui scrivo il tipo di deposito dell'asse Posteriore che normalmente agli Stati che comprendono la parola deposito smaltite o porta via


Le informazioni sulla Struttura delle TBL le Tovi nei 4 CSV, Struttura TBL ArtSchedaLavoro, Struttura TBL Deposito, Struttura TBL SchedaLavoro, Struttura TBL Veicolo
I dati su cui adesso dobbiamo lavorare sono quelli di 2 Autovetture in modo da usare dati reali che trovi nei CSV, ArtSchedaLavoro, Deposito, SchedaLavoro, Veicolo, Ant_Descrittori_WebSmall

Ti ho messo alcuni esempi di query in Query Test 1 e Query Test 2 dove vedi alcuni miei test tanto per capire qualcosa in piu, queta stringa che vedi negli script (SELECT DISTINCT IdVeic FROM SalesForceExportId) contiene gli Idveicolo delle 2 targhe su cui facciamo i Test e ovviamente la uso perché quando tutto sarà funzionante la popolo con tutto quello che devo esportare ...

La struttura finale dei dati come devono essere esportati è in Query test 2. Alla fine devo esportarla in due tabelle dentro Salesforce Con i campi, esattamente come vedi in questo Test che ti ho detto segnando tutti i movimenti, ma riuscendo a tenere la traccia del pneumatico con la ChiaveId o come nelle TBL di Salesforse che si collegano fra di loro "External_Id__c" dell'Oggetto Pneumatico e "Pneumatico__r:Pneumatico__c:External_Id__c" dell'oggetto Evento Pneumatico.

Infatti, come vedrai in un altro test che ho fatto che è Query test 3 Avevo pensato di provare a estrarre i dati dei pneumatici che trovavo in maniera univoca per creare le chiavi del prodotto e tutto quanto in una tabella che ho creato di appoggio per poi quando le dovevo andare estrarre per ogni veicolo con la sua chiave IdVeicolo cercavo il prodotto sapevo che era già stato montato e quindi cercavo di fare meno fatica, ma non sono riuscito a trovare una giusta idea, anche perché se per caso monto nella stessa macchina Due pneumatici Pirelli di un determinato modello e dopo qualche mese perché finisce magari le altre due gomme vecchie che va sotto altri due pneumatici Pirelli identici con la chiave del Dio ti speravo di riuscire a tener traccia anche di quelle in maniera separata dei chilometri che percorrono facendo i montaggi smontaggi e quelle cose che ti ho spiegato prima, ma non sono riuscito a farlo in maniera molto corretta e per questo sto cercando di spiegarti tutto ed avere il tuo aiuto.