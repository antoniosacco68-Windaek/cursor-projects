<div class="form-container">
    <div class="form-group inline-fields">
        <div>
            <label for="nome">Nome</label>
            [text* nome id:nome class:nome-input placeholder "Nome"]
        </div>
        <div>
            <label for="cognome">Cognome</label>
            [text* cognome id:cognome class:cognome-input placeholder "Cognome"]
        </div>
    </div>
    <div class="form-group inline-fields">
        <div>
            <label for="email">Email</label>
            [text* email id:email class:email-input placeholder "Email"]
        </div>
        <div>
            <label for="telefono">Telefono</label>
            [text* telefono id:telefono class:telefono-input placeholder "Telefono"]
        </div>
        <div>
            <label for="cap">CAP</label>
            [text cap id:cap class:cap-input placeholder "CAP"]
        </div>
    </div>
    <div class="form-group inline-fields">
        <div>
            <label for="targa">Targa veicolo</label>
            [text targa id:targa class:targa-input placeholder "Targa veicolo"]
        </div>
        <div>
            <label for="marca-veicolo">Marca veicolo</label>
            [text marcaveicolo id:marca-veicolo class:marca-veicolo-input placeholder "Marca veicolo"]
        </div>
        <div>
            <label for="modello-veicolo">Modello veicolo</label>
            [text modelloveicolo id:modello-veicolo class:modello-veicolo-input placeholder "Modello veicolo"]
        </div>
    </div>
    <div class="form-group">
      <label for="tipo-preventivo">Tipologia preventivo</label>
        [select* selected_tipo_preventivo id:tipo-preventivo class:preventivo-selector first_as_label "- - Tipologia preventivo - -" "PREVENTIVO PNEUMATICI" "PREVENTIVO MECCANICA" "PREVENTIVO PNEUMATICI MOTO"]
    </div>
    
    <!-- INIZIO SCRIPT VISUALIZZAZIONE CONDIZIONALE -->
    <script>
    // Funzione auto-eseguente per incapsulare tutto il codice
    (function() {
        // Funzione principale che verrà chiamata più volte per assicurarsi che venga eseguita
        function initModuloPreventivoMain() {
            console.log("[BG] Inizializzazione modulo preventivo");
            
            // Ottieni il selettore principale
            var selector = document.getElementById('tipo-preventivo');
            if (!selector) {
                console.warn("[BG] Selettore tipo preventivo non trovato!");
                return false;
            }
            
            // Ottieni i div dei gruppi
            var pneumaticiGroup = document.querySelector('.preventivo_pneumatici');
            var meccanicaGroup = document.querySelector('.preventivo_meccanica');
            var motoGroup = document.querySelector('.preventivo_pneumatici_moto');
            
            // Verifica se esistono i gruppi (almeno uno deve esistere)
            if (!pneumaticiGroup && !meccanicaGroup && !motoGroup) {
                console.warn("[BG] Nessun gruppo preventivo trovato!");
                return false;
            }
            
            // Rimuovi qualsiasi stile inline che potrebbe interferire con la visualizzazione
            function removeInlineStyle(element) {
                if (!element) return;
                
                // Rimuovi stile display
                element.style.removeProperty('display');
                
                // Rimuovi altri stili che potrebbero causare problemi
                element.style.removeProperty('visibility');
                element.style.removeProperty('opacity');
                element.style.removeProperty('position');
                
                // Rimuovi classi che potrebbero interferire
                element.classList.remove('hidden');
                
                // Imposta nuovamente lo stile display come proprietà DOM
                element.style.display = 'none';
            }
            
            // Forza subito lo stile di visualizzazione sui gruppi per evitare problemi di CSS
            function forceDisplayStyle() {
                // Pulisci prima eventuali stili inline che interferiscono
                if (pneumaticiGroup) removeInlineStyle(pneumaticiGroup);
                if (meccanicaGroup) removeInlineStyle(meccanicaGroup);
                if (motoGroup) removeInlineStyle(motoGroup);
                
                // Imposta lo stile display in modo esplicito
                if (pneumaticiGroup) {
                    pneumaticiGroup.style.display = 'none';
                    pneumaticiGroup.setAttribute('data-bg-initialized', 'true');
                }
                if (meccanicaGroup) {
                    meccanicaGroup.style.display = 'none';
                    meccanicaGroup.setAttribute('data-bg-initialized', 'true');
                }
                if (motoGroup) {
                    motoGroup.style.display = 'none';
                    motoGroup.setAttribute('data-bg-initialized', 'true');
                }
                
                // Controlla se c'è un valore selezionato e mostra il gruppo corrispondente
                var selectedValue = selector.value;
                if (selectedValue === 'PREVENTIVO PNEUMATICI' && pneumaticiGroup) {
                    pneumaticiGroup.style.display = 'block';
                    pneumaticiGroup.style.visibility = 'visible';
                    pneumaticiGroup.classList.remove('hidden');
                } else if (selectedValue === 'PREVENTIVO MECCANICA' && meccanicaGroup) {
                    meccanicaGroup.style.display = 'block';
                    meccanicaGroup.style.visibility = 'visible';
                    meccanicaGroup.classList.remove('hidden');
                } else if (selectedValue === 'PREVENTIVO PNEUMATICI MOTO' && motoGroup) {
                    motoGroup.style.display = 'block';
                    motoGroup.style.visibility = 'visible';
                    motoGroup.classList.remove('hidden');
                }
            }
            
            // Funzione principale per mostrare/nascondere i campi
            function togglePreventivoVisibility() {
                var selectedValue = selector.value;
                console.log("[BG] Cambio selezione preventivo:", selectedValue);
                
                // Nascondo tutti i div preventivo
                if (pneumaticiGroup) {
                    pneumaticiGroup.style.display = 'none';
                    pneumaticiGroup.style.visibility = 'hidden';
                }
                if (meccanicaGroup) {
                    meccanicaGroup.style.display = 'none';
                    meccanicaGroup.style.visibility = 'hidden';
                }
                if (motoGroup) {
                    motoGroup.style.display = 'none';
                    motoGroup.style.visibility = 'hidden';
                }
                
                // Mostro il div specifico in base alla selezione
                if (selectedValue === 'PREVENTIVO PNEUMATICI' && pneumaticiGroup) {
                    pneumaticiGroup.style.display = 'block';
                    pneumaticiGroup.style.visibility = 'visible';
                    console.log("[BG] Mostrato gruppo pneumatici");
                    setTimeout(initTireFilters, 50);
                    setTimeout(initTireFilters, 200);
                } else if (selectedValue === 'PREVENTIVO MECCANICA' && meccanicaGroup) {
                    meccanicaGroup.style.display = 'block';
                    meccanicaGroup.style.visibility = 'visible';
                    console.log("[BG] Mostrato gruppo meccanica");
                } else if (selectedValue === 'PREVENTIVO PNEUMATICI MOTO' && motoGroup) {
                    motoGroup.style.display = 'block';
                    motoGroup.style.visibility = 'visible';
                    console.log("[BG] Mostrato gruppo pneumatici moto");
                    setTimeout(initTireFilters, 50);
                    setTimeout(initTireFilters, 200);
                }
            }
            
            // Inizializza e gestisci i filtri dei pneumatici
            function initTireFilters() {
                console.log("[BG] Inizializzazione filtri pneumatici");
                
                // Ottieni i selettori per auto e moto
                var selectors = {
                    auto: {
                        larghezza: document.getElementById('larghezza-pneumatico'),
                        spalla: document.getElementById('sezione-pneumatico'),
                        diametro: document.getElementById('diametro-pneumatico'),
                        carico: document.getElementById('carico-pneumatico'),
                        velocita: document.getElementById('velocita-pneumatico')
                    },
                    motoAnt: {
                        larghezza: document.getElementById('larghezza-pneumatico-moto-ant'),
                        spalla: document.getElementById('sezione-pneumatico-moto-ant'),
                        diametro: document.getElementById('diametro-pneumatico-moto-ant'),
                        carico: document.getElementById('carico-pneumatico-moto-ant'),
                        velocita: document.getElementById('velocita-pneumatico-moto-ant')
                    },
                    motoPost: {
                        larghezza: document.getElementById('larghezza-pneumatico-moto-post'),
                        spalla: document.getElementById('sezione-pneumatico-moto-post'),
                        diametro: document.getElementById('diametro-pneumatico-moto-post'),
                        carico: document.getElementById('carico-pneumatico-moto-post'),
                        velocita: document.getElementById('velocita-pneumatico-moto-post')
                    }
                };
                
                // Verifica se ci sono selettori da configurare
                var hasAutoSelects = selectors.auto.larghezza && selectors.auto.spalla && selectors.auto.diametro;
                var hasMotoAntSelects = selectors.motoAnt.larghezza && selectors.motoAnt.spalla && selectors.motoAnt.diametro;
                var hasMotoPostSelects = selectors.motoPost.larghezza && selectors.motoPost.spalla && selectors.motoPost.diametro;
                
                if (!hasAutoSelects && !hasMotoAntSelects && !hasMotoPostSelects) {
                    console.warn("[BG] Nessun selettore pneumatici trovato!");
                    return false;
                }
                
                // Setup filtri per auto
                if (hasAutoSelects) {
                    setupSelectFilters(selectors.auto, getAutoData());
                }
                
                // Setup filtri per moto anteriore
                if (hasMotoAntSelects) {
                    setupSelectFilters(selectors.motoAnt, getMotoData());
                }
                
                // Setup filtri per moto posteriore
                if (hasMotoPostSelects) {
                    setupSelectFilters(selectors.motoPost, getMotoData());
                }
                
                return true;
            }
            
            // Funzione per configurare i filtri di un gruppo di selettori
            function setupSelectFilters(selectGroup, data) {
                // Verifica che tutti i selettori esistano
                if (!selectGroup.larghezza || !selectGroup.spalla || !selectGroup.diametro) {
                    return;
                }
                
                // Rimuovi eventuali event listener esistenti clonando gli elementi
                function cloneAndReplace(element) {
                    if (!element) return null;
                    var clone = element.cloneNode(true);
                    if (element.parentNode) {
                        element.parentNode.replaceChild(clone, element);
                    }
                    return clone;
                }
                
                selectGroup.larghezza = cloneAndReplace(selectGroup.larghezza);
                selectGroup.spalla = cloneAndReplace(selectGroup.spalla);
                selectGroup.diametro = cloneAndReplace(selectGroup.diametro);
                if (selectGroup.carico) selectGroup.carico = cloneAndReplace(selectGroup.carico);
                if (selectGroup.velocita) selectGroup.velocita = cloneAndReplace(selectGroup.velocita);
                
                // Funzione per popolare un select
                function populateSelect(select, options) {
                    if (!select) return;
                    
                    // Mantieni l'opzione placeholder
                    var placeholder = select.options[0];
                    select.innerHTML = '';
                    select.appendChild(placeholder);
                    
                    // Aggiungi le nuove opzioni
                    options.sort().forEach(function(option) {
                        var opt = document.createElement('option');
                        opt.value = option;
                        opt.text = option;
                        select.appendChild(opt);
                    });
                }
                
                // Funzione per reimpostare un select al valore predefinito
                function resetSelect(select) {
                    if (!select) return;
                    select.selectedIndex = 0;
                    
                    // Disabilita temporaneamente per evitare trigger di eventi
                    select.disabled = true;
                    setTimeout(function() { select.disabled = false; }, 0);
                }
                
                // Event listener per larghezza
                selectGroup.larghezza.addEventListener('change', function() {
                    var larghezzaValue = this.value;
                    
                    // Resetta i campi successivi
                    resetSelect(selectGroup.spalla);
                    resetSelect(selectGroup.diametro);
                    if (selectGroup.carico) resetSelect(selectGroup.carico);
                    if (selectGroup.velocita) resetSelect(selectGroup.velocita);
                    
                    // Se non c'è selezione, esci
                    if (!larghezzaValue) return;
                    
                    // Popola il campo spalla con i valori disponibili
                    var spalleDisponibili = data.spalle[larghezzaValue] || data.spalle.default;
                    populateSelect(selectGroup.spalla, spalleDisponibili);
                });
                
                // Event listener per spalla
                selectGroup.spalla.addEventListener('change', function() {
                    var spallaValue = this.value;
                    var larghezzaValue = selectGroup.larghezza.value;
                    
                    // Resetta i campi successivi
                    resetSelect(selectGroup.diametro);
                    if (selectGroup.carico) resetSelect(selectGroup.carico);
                    if (selectGroup.velocita) resetSelect(selectGroup.velocita);
                    
                    // Se non ci sono selezioni valide, esci
                    if (!spallaValue || !larghezzaValue) return;
                    
                    // Popola il campo diametro con i valori disponibili
                    var diametriDisponibili = data.diametri.default;
                    populateSelect(selectGroup.diametro, diametriDisponibili);
                });
                
                // Event listener per diametro
                selectGroup.diametro.addEventListener('change', function() {
                    var diametroValue = this.value;
                    
                    // Esci se non ci sono selezioni valide o se non ci sono selettori di carico/velocità
                    if (!diametroValue || !selectGroup.carico) return;
                    
                    // Resetta i campi successivi
                    resetSelect(selectGroup.carico);
                    if (selectGroup.velocita) resetSelect(selectGroup.velocita);
                    
                    // Popola il campo carico con i valori disponibili
                    var carichiDisponibili = data.carichi.default;
                    populateSelect(selectGroup.carico, carichiDisponibili);
                });
                
                // Event listener per carico
                if (selectGroup.carico && selectGroup.velocita) {
                    selectGroup.carico.addEventListener('change', function() {
                        var caricoValue = this.value;
                        
                        // Resetta il campo velocità
                        resetSelect(selectGroup.velocita);
                        
                        // Se non c'è selezione valida, esci
                        if (!caricoValue) return;
                        
                        // Popola il campo velocità con i valori disponibili
                        var velocitaDisponibili = data.velocita.default;
                        populateSelect(selectGroup.velocita, velocitaDisponibili);
                    });
                }
            }
            
            // Dati per pneumatici auto
            function getAutoData() {
                return {
                    spalle: {
                        '155': ['60', '65', '70', '75', '80'],
                        '165': ['60', '65', '70', '75', '80'],
                        '175': ['55', '60', '65', '70', '75', '80'],
                        '185': ['50', '55', '60', '65', '70', '75', '80'],
                        '195': ['40', '45', '50', '55', '60', '65', '70', '75', '80'],
                        '205': ['40', '45', '50', '55', '60', '65', '70', '75', '80'],
                        '215': ['35', '40', '45', '50', '55', '60', '65', '70', '75', '80'],
                        '225': ['30', '35', '40', '45', '50', '55', '60', '65', '70', '75'],
                        '235': ['30', '35', '40', '45', '50', '55', '60', '65', '70', '75'],
                        '245': ['30', '35', '40', '45', '50', '55', '60', '65', '70'],
                        '255': ['30', '35', '40', '45', '50', '55', '60', '65', '70'],
                        '265': ['30', '35', '40', '45', '50', '55', '60', '65', '70'],
                        '275': ['30', '35', '40', '45', '50', '55', '60', '65', '70'],
                        '285': ['25', '30', '35', '40', '45', '50', '55', '60', '65'],
                        '295': ['25', '30', '35', '40', '45', '50', '55', '60', '65'],
                        '305': ['25', '30', '35', '40', '45', '50', '55', '60', '65'],
                        '315': ['25', '30', '35', '40', '45', '50', '55', '60', '65'],
                        '325': ['25', '30', '35', '40', '45', '50', '55', '60', '65'],
                        default: ['25', '30', '35', '40', '45', '50', '55', '60', '65', '70', '75', '80', '85']
                    },
                    diametri: {
                        default: ['13', '14', '15', '16', '17', '18', '19', '20', '21', '22', '23', '24']
                    },
                    carichi: {
                        default: ['74', '75', '77', '79', '80', '81', '82', '83', '84', '85', '86', '87', '88', '89', '90', 
                                  '91', '92', '93', '94', '95', '96', '97', '98', '99', '100', '101', '102', '103', '104', '105',
                                  '106', '107', '108', '109', '110', '111', '112', '113', '114', '115', '116', '117', '120', '121']
                    },
                    velocita: {
                        default: ['N', 'P', 'Q', 'R', 'S', 'T', 'H', 'V', 'W', 'Y', 'Z', 'ZR']
                    }
                };
            }
            
            // Dati per pneumatici moto
            function getMotoData() {
                return {
                    spalle: {
                        '60': ['80', '90', '100'],
                        '70': ['80', '90', '100'],
                        '80': ['80', '90', '100'],
                        '85': ['80', '90', '100'],
                        '90': ['80', '90', '100'],
                        '100': ['70', '80', '90', '100'],
                        '110': ['70', '80', '90', '100'],
                        '120': ['55', '60', '65', '70', '80', '90'],
                        '125': ['55', '60', '65', '70', '80', '90'],
                        '130': ['60', '65', '70', '80', '90'],
                        '140': ['60', '65', '70', '75', '80', '90'],
                        '150': ['60', '65', '70', '75', '80', '90'],
                        '160': ['60', '65', '70', '80', '90'],
                        '170': ['60', '70', '80'],
                        '180': ['55', '60', '65', '70', '80'],
                        '190': ['50', '55', '60', '65', '70', '80'],
                        '200': ['50', '55', '60', '65', '70'],
                        '210': ['50', '55', '60'],
                        '240': ['45', '50', '55', '60'],
                        '250': ['40', '45', '50', '55'],
                        '260': ['40', '45', '50'],
                        '275': ['35', '40', '45'],
                        '300': ['30', '35', '40'],
                        '325': ['30', '35'],
                        '350': ['30', '35'],
                        '400': ['25', '30', '35'],
                        default: ['25', '30', '35', '40', '45', '50', '55', '60', '65', '70', '75', '80', '85', '90', '100']
                    },
                    diametri: {
                        default: ['8', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21', '23', '420']
                    },
                    carichi: {
                        default: ['29', '30', '33', '34', '35', '36', '37', '38', '40', '41', '42', '43', '44', '45', '46', '47', '48', '49', '50',
                                  '51', '52', '53', '54', '55', '56', '57', '58', '59', '60', '61', '62', '63', '64', '65', '66', '67', '68', '69',
                                  '70', '71', '72', '73', '74', '75', '76', '77', '78', '79', '80', '81', '82', '84', '86']
                    },
                    velocita: {
                        default: ['H', 'J', 'L', 'M', 'N', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'Z']
                    }
                };
            }
            
            // Aggiungi event listener per il cambio del tipo di preventivo
            selector.addEventListener('change', togglePreventivoVisibility);
            
            // Controllo iniziale per mostrare il div corretto se c'è già un valore selezionato
            if (selector.value) {
                togglePreventivoVisibility();
            }
            
            // Aggiungi event listener per la validazione del form
            var form = document.querySelector('.wpcf7-form');
            if (form) {
                form.addEventListener('submit', function(e) {
                    console.log("[BG] Tentativo di invio form");
                    
                    // Controlla che il tipo di preventivo sia selezionato
                    if (!selector.value) {
                        alert("Seleziona un tipo di preventivo prima di inviare!");
                        e.preventDefault();
                        return false;
                    }
                    
                    // Controlli specifici per ogni tipo di preventivo
                    if (selector.value === 'PREVENTIVO PNEUMATICI') {
                        var larghezzaSelect = document.getElementById('larghezza-pneumatico');
                        var spallaSelect = document.getElementById('sezione-pneumatico');
                        var diametroSelect = document.getElementById('diametro-pneumatico');
                        
                        if (larghezzaSelect && spallaSelect && diametroSelect &&
                            (!larghezzaSelect.value || !spallaSelect.value || !diametroSelect.value)) {
                            alert("Completa i dati dello pneumatico (larghezza, spalla e diametro sono obbligatori)");
                            e.preventDefault();
                            return false;
                        }
                    } else if (selector.value === 'PREVENTIVO PNEUMATICI MOTO') {
                        var larghezzaAntSelect = document.getElementById('larghezza-pneumatico-moto-ant');
                        var spallaAntSelect = document.getElementById('sezione-pneumatico-moto-ant');
                        var diametroAntSelect = document.getElementById('diametro-pneumatico-moto-ant');
                        
                        if (larghezzaAntSelect && spallaAntSelect && diametroAntSelect &&
                            (!larghezzaAntSelect.value || !spallaAntSelect.value || !diametroAntSelect.value)) {
                            alert("Completa i dati dello pneumatico anteriore (larghezza, spalla e diametro sono obbligatori)");
                            e.preventDefault();
                            return false;
                        }
                    }
                    
                    return true;
                });
            }
            
            // Forza la visibilità corretta per evitare problemi con CSS
            forceDisplayStyle();
            
            // Inizializza i filtri se un gruppo è già visibile
            if ((pneumaticiGroup && pneumaticiGroup.style.display === 'block') || 
                (motoGroup && motoGroup.style.display === 'block')) {
                setTimeout(initTireFilters, 100);
            }
            
            console.log("[BG] Inizializzazione modulo preventivo completata");
            return true;
        }
        
        // Funzione per gestire il caricamento di Contact Form 7
        function handleCF7Events() {
            document.addEventListener('wpcf7:loaded', function() {
                console.log("[BG] Form CF7 caricato");
                setTimeout(initModuloPreventivoMain, 100);
                setTimeout(initModuloPreventivoMain, 500);
            });
            
            // Gestisci altri eventi CF7
            var cf7Events = ['wpcf7mailsent', 'wpcf7submit', 'wpcf7invalid', 'wpcf7beforesubmit'];
            cf7Events.forEach(function(eventName) {
                document.addEventListener(eventName, function() {
                    setTimeout(initModuloPreventivoMain, 100);
                });
            });
        }
        
        // Aggiungi MutationObserver per monitorare le modifiche al DOM
        function setupMutationObserver() {
            // Observer per monitorare le modifiche al DOM
            var observer = new MutationObserver(function(mutations) {
                var shouldInit = false;
                
                mutations.forEach(function(mutation) {
                    if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
                        // Controlla se ci sono elementi rilevanti nel DOM
                        for (var i = 0; i < mutation.addedNodes.length; i++) {
                            var node = mutation.addedNodes[i];
                            if (node.nodeType === 1) { // Nodo elemento
                                if (node.id === 'tipo-preventivo' || 
                                    node.classList && (
                                        node.classList.contains('preventivo_pneumatici') || 
                                        node.classList.contains('preventivo_pneumatici_moto') || 
                                        node.classList.contains('preventivo_meccanica')
                                    )) {
                                    shouldInit = true;
                                    break;
                                }
                                
                                // Controlla anche nei figli del nodo
                                if (node.querySelector && (
                                    node.querySelector('#tipo-preventivo') || 
                                    node.querySelector('.preventivo_pneumatici') || 
                                    node.querySelector('.preventivo_pneumatici_moto') || 
                                    node.querySelector('.preventivo_meccanica')
                                )) {
                                    shouldInit = true;
                                    break;
                                }
                            }
                        }
                    }
                });
                
                if (shouldInit) {
                    setTimeout(initModuloPreventivoMain, 100);
                }
            });
            
            // Osserva tutto il documento per le modifiche
            observer.observe(document.body, {
                childList: true,
                subtree: true
            });
        }
        
        // Avvia il modulo quando il DOM è pronto
        function initOnDOMReady() {
            document.addEventListener('DOMContentLoaded', function() {
                // Prima inizializzazione
                setTimeout(initModuloPreventivoMain, 100);
                
                // Setup observer e gestori eventi
                setupMutationObserver();
                handleCF7Events();
                
                // Ulteriori tentativi di inizializzazione
                setTimeout(initModuloPreventivoMain, 500);
                setTimeout(initModuloPreventivoMain, 1000);
                setTimeout(initModuloPreventivoMain, 2000);
            });
        }
        
        // Gestisci il caso in cui DOMContentLoaded è già stato attivato
        if (document.readyState === 'loading') {
            initOnDOMReady();
        } else {
            // DOMContentLoaded è già stato attivato
            setTimeout(initModuloPreventivoMain, 100);
            setupMutationObserver();
            handleCF7Events();
            
            // Ulteriori tentativi di inizializzazione
            setTimeout(initModuloPreventivoMain, 500);
            setTimeout(initModuloPreventivoMain, 1000);
            setTimeout(initModuloPreventivoMain, 2000);
        }
        
        // Gestisci caricamento pagina da cache browser
        window.addEventListener('pageshow', function(event) {
            if (event.persisted) {
                console.log("[BG] Pagina ripristinata dalla cache");
                setTimeout(initModuloPreventivoMain, 100);
                setTimeout(initModuloPreventivoMain, 500);
            }
        });
        
        // Esponi funzione per inizializzazione esterna
        window.initBGModuloPreventivo = initModuloPreventivoMain;
        
        // Forza l'inizializzazione dopo il caricamento completo
        window.addEventListener('load', function() {
            console.log("[BG] Evento load pagina - Inizializzo");
            setTimeout(initModuloPreventivoMain, 100);
            setTimeout(initModuloPreventivoMain, 1000);
        });
    })();
    </script>
    <!-- FINE SCRIPT VISUALIZZAZIONE CONDIZIONALE -->
    
    <div class="preventivo-group preventivo_pneumatici" style="display:none;">
         <div class="form-group tire-size-container">
            <label class="main-label">Misura pneumatici</label>
            <div class="tire-size-selectors">
              <div class="tire-select-group">
                   <label for="larghezza-pneumatico">Larghezza</label>
                    [select larghezza id:larghezza-pneumatico class:tire-select first_as_label "Larghezza"
                       "155" "165" "175" "185" "195" "205" "215" "225" "235" "245" "255" "265" "275" "285" "295" "305" "315" "325" "345" "355" "750"]
              </div>
              <div class="tire-select-group">
                 <label for="sezione-pneumatico">Spalla</label>
                   [select sezione id:sezione-pneumatico class:tire-select first_as_label "Spalla"
                    "25" "30" "35" "40" "45" "50" "55" "60" "65" "70" "75" "80" "85"]
              </div>
               <div class="tire-select-group">
                   <label for="diametro-pneumatico">Diametro</label>
                    [select diametro id:diametro-pneumatico class:tire-select first_as_label "Diametro"
                    "13" "14" "15" "16" "17" "18" "19" "20" "21" "22" "23" "24"]
              </div>
             <div class="tire-select-group">
                  <label for="carico-pneumatico">Carico</label>
                [select carico id:carico-pneumatico class:tire-select first_as_label "Carico" "74" "77" "79" "80" "81" "82" "83" "84" "85" "86" "87" "88" "89" "90" "91" "92" "93" "94" "95" "96" "97" "98" "99" "100" "101" "102" "103" "104" "105" "106" "107" "108" "109" "110" "111" "112" "113" "114" "115" "116" "117" "120" "121"]
               </div>
              <div class="tire-select-group">
                   <label for="velocita-pneumatico">Velocità</label>
                  [select velocita id:velocita-pneumatico class:tire-select first_as_label "Velocità" "N" "Q" "R" "S" "T" "H" "V" "W" "Y"]
              </div>
            </div>
        </div>
        <div class="form-group">
           <label for="stagionalita-pneumatico">Stagionalità Pneumatici</label>
           [select stagionalita id:stagionalita-pneumatico first_as_label "- - Stagionalità Pneumatici - -" "ESTIVE" "INVERNALI" "QUATTRO STAGIONI"]
        </div>
         <div>
            <label for="NrPneumatici">Numero Pneumatici</label>
            [select NrPneumatici id:NrPneumatici first_as_label "- - Nr Pneumatici - -" "1" "2" "3" "4"]
         </div>
        <div class="form-group">
           <label for="fascia-prezzo-pneumatico">Fascia Prezzo Pneumatici</label>
           [select fasciaprezzo id:fascia-prezzo-pneumatico first_as_label "- - Fascia Prezzo Pneumatico - -" "CLASSE T1 PREMIUM" "CLASSE T2 MEDIUM" "CLASSE T3 ECONOMY" "CLASSE T4 USATE" "CLASSE T5 LE NOSTRE PROPOSTE"]
        </div>
    </div>
     <div class="preventivo-group preventivo_pneumatici_moto" style="display:none;">
         <div class="form-group tire-size-container">
            <label class="main-label">Misura pneumatico anteriore</label>
            <div class="tire-size-selectors">
                <div class="tire-select-group">
                   <label for="larghezza-pneumatico-moto-ant">Larghezza Anteriore</label>
                    [select larghezza_moto_ant id:larghezza-pneumatico-moto-ant class:tire-select first_as_label "Larghezza"
                       "100" "110" "120" "125" "130" "140" "150" "160" "165" "170" "180" "190" "2" "200" "210" "240" "250" "260" "275" "3" "300" "325" "350" "4" "400" "410" "460" "60" "70" "80" "85" "90"]
                </div>
                <div class="tire-select-group">
                    <label for="sezione-pneumatico-moto-ant">Spalla Anteriore</label>
                    [select sezione_moto_ant id:sezione-pneumatico-moto-ant class:tire-select first_as_label "Spalla"
                        "25" "40" "45" "50" "55" "60" "65" "70" "75" "80" "85" "90" "100"]
                </div>
                <div class="tire-select-group">
                    <label for="diametro-pneumatico-moto-ant">Diametro Anteriore</label>
                    [select diametro_moto_ant id:diametro-pneumatico-moto-ant class:tire-select first_as_label "Diametro"
                    "10" "11" "12" "13" "8" "14" "15" "16" "17" "18" "19" "20" "21" "23" "420"]
                </div>
                <div class="tire-select-group">
                    <label for="carico-pneumatico-moto-ant">Carico Anteriore</label>
                    [select carico_moto_ant id:carico-pneumatico-moto-ant class:tire-select first_as_label "Carico" "29" "30" "33" "34" "35" "36" "37" "38" "40" "41" "42" "43" "44" "45" "46" "47" "48" "49" "50" "51" "52" "53" "54" "55" "56" "57" "58" "59" "60" "61" "62" "63" "64" "65" "66" "67" "68" "69" "70" "71" "72" "73" "74" "75" "76" "77" "78" "79" "80" "81" "82" "84" "86"]
                </div>
                <div class="tire-select-group">
                    <label for="velocita-pneumatico-moto-ant">Velocità Anteriore</label>
                    [select velocita_moto_ant id:velocita-pneumatico-moto-ant class:tire-select first_as_label "Velocità" "H" "J" "L" "M" "N" "P" "Q" "R" "S" "T" "V" "W"]
                </div>
            </div>
        </div>
         <div class="form-group tire-size-container">
            <label class="main-label">Misura pneumatico posteriore</label>
            <div class="tire-size-selectors">
              <div class="tire-select-group">
                   <label for="larghezza-pneumatico-moto-post">Larghezza Posteriore</label>
                    [select larghezza_moto_post id:larghezza-pneumatico-moto-post class:tire-select first_as_label "Larghezza"
                       "100" "110" "120" "125" "130" "140" "150" "160" "165" "170" "180" "190" "2" "200" "210" "240" "250" "260" "275" "3" "300" "325" "350" "4" "400" "410" "460" "60" "70" "80" "85" "90"]
              </div>
              <div class="tire-select-group">
                 <label for="sezione-pneumatico-moto-post">Spalla Posteriore</label>
                   [select sezione_moto_post id:sezione-pneumatico-moto-post class:tire-select first_as_label "Spalla"
                    "25" "40" "45" "50" "55" "60" "65" "70" "75" "80" "85" "90" "100"]
              </div>
               <div class="tire-select-group">
                   <label for="diametro-pneumatico-moto-post">Diametro Posteriore</label>
                    [select diametro_moto_post id:diametro-pneumatico-moto-post class:tire-select first_as_label "Diametro"
                    "10" "11" "12" "13" "8" "14" "15" "16" "17" "18" "19" "20" "21" "23" "420"]
              </div>
             <div class="tire-select-group">
                  <label for="carico-pneumatico-moto-post">Carico Posteriore</label>
                [select carico_moto_post id:carico-pneumatico-moto-post class:tire-select first_as_label "Carico" "29" "30" "33" "34" "35" "36" "37" "38" "40" "41" "42" "43" "44" "45" "46" "47" "48" "49" "50" "51" "52" "53" "54" "55" "56" "57" "58" "59" "60" "61" "62" "63" "64" "65" "66" "67" "68" "69" "70" "71" "72" "73" "74" "75" "76" "77" "78" "79" "80" "81" "82" "84" "86"]
               </div>
              <div class="tire-select-group">
                   <label for="velocita-pneumatico-moto-post">Velocità Posteriore</label>
                  [select velocita_moto_post id:velocita-pneumatico-moto-post class:tire-select first_as_label "Velocità" "H" "J" "L" "M" "N" "P" "Q" "R" "S" "T" "V" "W"]
              </div>
            </div>
        </div>
    </div>

    <div class="preventivo-group preventivo_meccanica" style="display:none;">
       <div class="form-group">
        <label for="km-manutenzione">KM</label>
           [text km id:km-manutenzione class:km-input placeholder "KM"]
       </div>
        <div class="form-group">
          <label for="tipo-manutenzione">Tipo manutenzione</label>
            [text tipo_manutenzione id:tipo-manutenzione class:tipo-manutenzione-input placeholder "Tipo manutenzione"]
        </div>
    </div>
    
    <div class="form-group">
         <label for="negozio">Seleziona un centro</label>
        [select* menu-616 id:negozio first_as_label "- - Seleziona un negozio - -" "BG1-BARGELLINO (Bologna)" "BG2-BORGO PANIGALE (Bologna)" "BG3-VILLANOVA (Castenaso)" "BG4-PONTE RIZZOLI (Ozzano Emilia)" "BG5-CASTEL GUELFO (Bologna)" "BG6-CASTEL SAN PIETRO (Bologna)" "BG7-FUNO DI ARGELATO (Bologna)"]
    </div>
    <div class="form-group">
         <label for="richiesta">Testo della tua richiesta</label>
        [textarea your-message id:richiesta class:richiesta-input placeholder "Testo della tua richiesta"]
    </div>

    <div class="checkbox-contatti form-group">
       [checkbox* checkbox-244 id:privacy-check "Ho letto e accettato le condizioni elencate nella nostra"]
       <a href="/privacy" target="_blank">privacy policy</a> (ai sensi dell'art. 13 del GDPR 679/2016)
    </div>
    <div class="checkbox-contatti form-group">
        [checkbox newsletter id:newsletter-check "Autorizzo"] al trattamento dei miei dati per finalità di marketing elencate nella 
        <a href="/privacy" target="_blank">privacy policy</a> (ai sensi dell'art.9 e art. 13 del GDPR 679/2016) e all'iscrizione alla newsletter.
    </div>
    <p style="text-align: center;">[submit "Invia Richiesta"]</p>
</div>
<style>
    .form-container {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }
    .form-group{
        display: flex;
        flex-direction: column;
        gap:5px;
    }
    .main-label{
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
    }
     .tire-size-container {
        margin-bottom: 10px;
    }
    .tire-size-selectors{
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
    }

   .tire-select-group {
        flex-grow: 1;
        flex-basis: calc(20% - 10px);
        min-width: calc(20% - 10px);
    }
     .preventivo-group.hidden{
        display: none !important;
    }
    .preventivo-group {
        display: block;
    }
    .tire-select {
        width: 100%;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
    }

    .checkbox-contatti {
    display: flex;
    align-items: center;
    gap: 5px;
    margin-bottom: 10px;
  }
  
    .checkbox-contatti a {
      color: #000000;
      text-decoration: none;
    }

    .checkbox-contatti a:hover {
      text-decoration: underline;
    }
    /* Placeholders Style */
    ::placeholder {
       color: #000000;
       opacity: 2;
    }
    /* Media Query per schermi piccoli (es. telefoni) */
    @media (max-width: 768px) {
       .tire-size-selectors {
            flex-direction: column;
        }
        .tire-select-group {
           width: 100%;
           min-width: auto;
           margin-bottom: 10px;
        }
    }
    /* New Rules */
    .form-group.inline-fields {
        display: flex;
        flex-direction: row;
        gap: 20px; /* Spazio tra i campi */
        align-items: flex-start; /* Allinea i campi in alto */
    }
    .form-group.inline-fields > div {
        flex: 1; /* Distribuisce lo spazio tra i campi */
    }
</style>